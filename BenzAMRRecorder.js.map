{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "node_modules\\audio-buffer-remix\\index.js",
    "node_modules\\audio-buffer\\index.js",
    "node_modules\\audio-context\\index.js",
    "node_modules\\base64-js\\index.js",
    "node_modules\\buffer-to-arraybuffer\\node_modules\\buffer-to-arraybuffer\\buffer-to-arraybuffer.js",
    "node_modules\\buffer\\index.js",
    "node_modules\\ieee754\\index.js",
    "node_modules\\is-audio-buffer\\index.js",
    "node_modules\\is-browser\\client.js",
    "node_modules\\is-buffer\\index.js",
    "node_modules\\is-plain-obj\\index.js",
    "node_modules\\recorderjs\\recorder.js",
    "src\\BenzAMRRecorder.js",
    "src\\audioContext.js",
    "src\\index.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "/**\r\n * @module audio-buffer-remix\r\n */\r\n'use strict'\r\n\r\nconst isAudioBuffer = require('is-audio-buffer')\r\nconst AudioBuffer = require('audio-buffer')\r\nconst isPlainObj = require('is-plain-obj')\r\n\r\nmodule.exports = remix\r\n\r\n\r\nremix.speakerMap = {\r\n  1: {\r\n    2: [0, 0],\r\n    4: [0, 0, null, null],\r\n    6: [null, null, 0, null, null]\r\n  },\r\n  2: {\r\n    1: [(dest, source) => {\r\n      let left = source.getChannelData(0)\r\n      let right = source.getChannelData(1)\r\n      for (let i = 0, l = dest.length; i < l; i++) {\r\n        dest[i] = .5 * (left[i] + right[i])\r\n      }\r\n    }],\r\n    4: [0, 1, null, null],\r\n    6: [0, 1, null, null, null, null]\r\n  },\r\n  4: {\r\n    1: [(dest, source) => {\r\n      let left = source.getChannelData(0)\r\n      let right = source.getChannelData(1)\r\n      let sleft = source.getChannelData(2)\r\n      let sright = source.getChannelData(3)\r\n      for (let i = 0, l = dest.length; i < l; i++) {\r\n        dest[i] = .25 * (left[i] + right[i] + sleft[i] + sright[i])\r\n      }\r\n    }],\r\n    2: [\r\n       (dest, source) => {\r\n        let left = source.getChannelData(0)\r\n        let sleft = source.getChannelData(2)\r\n        for (let i = 0, l = dest.length; i < l; i++) {\r\n          dest[i] = .5 * (left[i] + sleft[i])\r\n        }\r\n      },\r\n      (dest, source) => {\r\n        let right = source.getChannelData(1)\r\n        let sright = source.getChannelData(3)\r\n        for (let i = 0, l = dest.length; i < l; i++) {\r\n          dest[i] = .5 * (right[i] + sright[i])\r\n        }\r\n      }\r\n    ],\r\n    6: [0, 1, null, null, 2, 3]\r\n  },\r\n  6: {\r\n    1: [(dest, source) => {\r\n      let left = source.getChannelData(0)\r\n      let right = source.getChannelData(1)\r\n      let center = source.getChannelData(2)\r\n      let sleft = source.getChannelData(4)\r\n      let sright = source.getChannelData(5)\r\n      for (let i = 0, l = dest.length; i < l; i++) {\r\n        dest[i] = 0.7071 * (left[i] + right[i]) + center[i] + 0.5 * (sleft[i] + sright[i])\r\n      }\r\n    }],\r\n    2: [(dest, source) => {\r\n      let left = source.getChannelData(0)\r\n      let center = source.getChannelData(2)\r\n      let sleft = source.getChannelData(4)\r\n      for (let i = 0, l = dest.length; i < l; i++) {\r\n        dest[i] = left[i] + 0.7071 * (center[i] + sleft[i])\r\n      }\r\n    }, (dest, source) => {\r\n      let right = source.getChannelData(1)\r\n      let center = source.getChannelData(2)\r\n      let sright = source.getChannelData(5)\r\n      for (let i = 0, l = dest.length; i < l; i++) {\r\n        dest[i] = right[i] + 0.7071 * (center[i] + sright[i])\r\n      }\r\n    }],\r\n    4: [(dest, source) => {\r\n      let left = source.getChannelData(0)\r\n      let center = source.getChannelData(2)\r\n      for (let i = 0, l = dest.length; i < l; i++) {\r\n        dest[i] = left[i] + 0.7071 * center[i]\r\n      }\r\n    }, (dest, source) => {\r\n      let right = source.getChannelData(1)\r\n      let center = source.getChannelData(2)\r\n      for (let i = 0, l = dest.length; i < l; i++) {\r\n        dest[i] = right[i] + 0.7071 * center[i]\r\n      }\r\n    }, 4, 5]\r\n  }\r\n}\r\n\r\nremix.discreteMap = Array(32).fill(0).map((v, i) => i)\r\n\r\n\r\nfunction remix (source, channels, options) {\r\n  if (!isAudioBuffer(source)) throw Error('Pass AudioBuffer as the first param')\r\n  let inputChannels = source.numberOfChannels\r\n\r\n  //shortcut same number\r\n  if (channels === inputChannels) return source;\r\n\r\n  if (!options) options = {}\r\n  else if (typeof options === 'string') options = {interpretation: options}\r\n\r\n  let interpretation = options.interpretation || 'speaker'\r\n\r\n  //obtain map\r\n  let map\r\n  if (typeof channels === 'number') {\r\n    if (interpretation == 'discrete') {\r\n      map = remix.discreteMap.slice(0, channels)\r\n    }\r\n    else {\r\n      let inputMap = remix.speakerMap[inputChannels]\r\n      if (inputMap) {\r\n        map = inputMap[channels]\r\n      }\r\n      //if match is not found - do discrete interpretation\r\n      if (!map) {\r\n        map = remix.discreteMap.slice(0, channels)\r\n      }\r\n    }\r\n  }\r\n  else if (isPlainObj(channels)) {\r\n    let arrMap = []\r\n    for (let i in channels) {\r\n      arrMap[i] = channels[i]\r\n    }\r\n    map = arrMap\r\n    channels = map.length\r\n  }\r\n  else if (Array.isArray(channels)) {\r\n    map = channels\r\n    channels = channels.length\r\n  }\r\n  else {\r\n    throw Error('Target number of channels should be a number or map')\r\n  }\r\n\r\n  //source is buffer list - do per-buffer mapping\r\n  if (source.map) {\r\n    return source.map(mapBuffer)\r\n  }\r\n  //otherwise map once\r\n  else {\r\n    return mapBuffer(source)\r\n  }\r\n\r\n  function mapBuffer (source) {\r\n    let dest = new AudioBuffer(channels, source.length, {context: options.context})\r\n    for (let c = 0; c < channels; c++) {\r\n      let outputData = dest.getChannelData(c)\r\n      let mapper = map[c]\r\n      if (mapper == null) continue;\r\n      if (typeof mapper == 'number') {\r\n        if (mapper >= source.numberOfChannels) continue;\r\n        let inputData = source.getChannelData(mapper)\r\n        outputData.set(inputData)\r\n      }\r\n      else if (typeof mapper == 'function') {\r\n        mapper(outputData, source)\r\n      }\r\n    }\r\n    return dest\r\n  }\r\n\r\n  return dest\r\n}\r\n",
    "/**\r\n * AudioBuffer class\r\n *\r\n * @module audio-buffer/buffer\r\n */\r\n'use strict'\r\n\r\nvar isBuffer = require('is-buffer')\r\nvar b2ab = require('buffer-to-arraybuffer')\r\nvar isBrowser = require('is-browser')\r\nvar isAudioBuffer = require('is-audio-buffer')\r\nvar context = require('audio-context')\r\nvar isPlainObj = require('is-plain-obj')\r\n\r\n\r\nmodule.exports = AudioBuffer\r\n\r\n\r\n/**\r\n * @constructor\r\n *\r\n * @param {∀} data Any collection-like object\r\n */\r\nfunction AudioBuffer (channels, data, sampleRate, options) {\r\n\t//enforce class\r\n\tif (!(this instanceof AudioBuffer)) return new AudioBuffer(channels, data, sampleRate, options);\r\n\r\n\t//detect last argument\r\n\tvar c = arguments.length\r\n\twhile (!arguments[c] && c) c--;\r\n\tvar lastArg = arguments[c];\r\n\r\n\t//figure out options\r\n\tvar ctx, isWAA, floatArray, isForcedType = false\r\n\tif (lastArg && typeof lastArg != 'number') {\r\n\t\tctx = lastArg.context || (context && context())\r\n\t\tisWAA = lastArg.isWAA != null ? lastArg.isWAA : !!(isBrowser && ctx.createBuffer)\r\n\t\tfloatArray = lastArg.floatArray || Float32Array\r\n\t\tif (lastArg.floatArray) isForcedType = true\r\n\t}\r\n\telse {\r\n\t\tctx = context && context()\r\n\t\tisWAA = !!ctx\r\n\t\tfloatArray = Float32Array\r\n\t}\r\n\r\n\t//if one argument only - it is surely data or length\r\n\t//having new AudioBuffer(2) does not make sense as 2 being number of channels\r\n\tif (data == null || isPlainObj(data)) {\r\n\t\tdata = channels || 1;\r\n\t\tchannels = null;\r\n\t}\r\n\t//audioCtx.createBuffer() - complacent arguments\r\n\telse {\r\n\t\tif (typeof sampleRate == 'number') this.sampleRate = sampleRate;\r\n\t\telse if (isBrowser) this.sampleRate = ctx.sampleRate;\r\n\t\tif (channels != null) this.numberOfChannels = channels;\r\n\t}\r\n\r\n\t//if AudioBuffer(channels?, number, rate?) = create new array\r\n\t//this is the default WAA-compatible case\r\n\tif (typeof data === 'number') {\r\n\t\tthis.length = data;\r\n\t\tthis.data = []\r\n\t\tfor (var c = 0; c < this.numberOfChannels; c++) {\r\n\t\t\tthis.data[c] = new floatArray(data)\r\n\t\t}\r\n\t}\r\n\t//if other audio buffer passed - create fast clone of it\r\n\t//if WAA AudioBuffer - get buffer’s data (it is bounded)\r\n\telse if (isAudioBuffer(data)) {\r\n\t\tthis.length = data.length;\r\n\t\tif (channels == null) this.numberOfChannels = data.numberOfChannels;\r\n\t\tif (sampleRate == null) this.sampleRate = data.sampleRate;\r\n\r\n\t\tthis.data = []\r\n\r\n\t\t//copy channel's data\r\n\t\tfor (var c = 0, l = this.numberOfChannels; c < l; c++) {\r\n\t\t\tthis.data[c] = data.getChannelData(c).slice()\r\n\t\t}\r\n\t}\r\n\t//TypedArray, Buffer, DataView etc, or ArrayBuffer\r\n\t//NOTE: node 4.x+ detects Buffer as ArrayBuffer view\r\n\telse if (ArrayBuffer.isView(data) || data instanceof ArrayBuffer || isBuffer(data)) {\r\n\t\tif (isBuffer(data)) {\r\n\t\t\tdata = b2ab(data);\r\n\t\t}\r\n\t\t//convert non-float array to floatArray\r\n\t\tif (!(data instanceof Float32Array) && !(data instanceof Float64Array)) {\r\n\t\t\tdata = new floatArray(data.buffer || data);\r\n\t\t}\r\n\r\n\t\tthis.length = Math.floor(data.length / this.numberOfChannels);\r\n\t\tthis.data = []\r\n\t\tfor (var c = 0; c < this.numberOfChannels; c++) {\r\n\t\t\tthis.data[c] = data.subarray(c * this.length, (c + 1) * this.length);\r\n\t\t}\r\n\t}\r\n\t//if array - parse channeled data\r\n\telse if (Array.isArray(data)) {\r\n\t\t//if separated data passed already - send sub-arrays to channels\r\n\t\tif (data[0] instanceof Object) {\r\n\t\t\tif (channels == null) this.numberOfChannels = data.length;\r\n\t\t\tthis.length = data[0].length;\r\n\t\t\tthis.data = []\r\n\t\t\tfor (var c = 0; c < this.numberOfChannels; c++ ) {\r\n\t\t\t\tthis.data[c] = (!isForcedType && ((data[c] instanceof Float32Array) || (data[c] instanceof Float64Array))) ? data[c] : new floatArray(data[c])\r\n\t\t\t}\r\n\t\t}\r\n\t\t//plain array passed - split array equipartially\r\n\t\telse {\r\n\t\t\tthis.length = Math.floor(data.length / this.numberOfChannels);\r\n\t\t\tthis.data = []\r\n\t\t\tfor (var c = 0; c < this.numberOfChannels; c++) {\r\n\t\t\t\tthis.data[c] = new floatArray(data.slice(c * this.length, (c + 1) * this.length))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//if ndarray, typedarray or other data-holder passed - redirect plain databuffer\r\n\telse if (data && (data.data || data.buffer)) {\r\n\t\treturn new AudioBuffer(this.numberOfChannels, data.data || data.buffer, this.sampleRate);\r\n\t}\r\n\t//if other - unable to parse arguments\r\n\telse {\r\n\t\tthrow Error('Failed to create buffer: check provided arguments');\r\n\t}\r\n\r\n\r\n\t//for browser - return WAA buffer, no sub-buffering allowed\r\n\tif (isWAA) {\r\n\t\t//create WAA buffer\r\n\t\tvar audioBuffer = ctx.createBuffer(this.numberOfChannels, this.length, this.sampleRate);\r\n\r\n\t\t//fill channels\r\n\t\tfor (var c = 0; c < this.numberOfChannels; c++) {\r\n\t\t\taudioBuffer.getChannelData(c).set(this.getChannelData(c));\r\n\t\t}\r\n\r\n\t\treturn audioBuffer;\r\n\t}\r\n\r\n\tthis.duration = this.length / this.sampleRate;\r\n}\r\n\r\n\r\n/**\r\n * Default params\r\n */\r\nAudioBuffer.prototype.numberOfChannels = 2;\r\nAudioBuffer.prototype.sampleRate = context.sampleRate || 44100;\r\n\r\n\r\n/**\r\n * Return data associated with the channel.\r\n *\r\n * @return {Array} Array containing the data\r\n */\r\nAudioBuffer.prototype.getChannelData = function (channel) {\r\n\t//FIXME: ponder on this, whether we really need that rigorous check, it may affect performance\r\n\tif (channel >= this.numberOfChannels || channel < 0 || channel == null) throw Error('Cannot getChannelData: channel number (' + channel + ') exceeds number of channels (' + this.numberOfChannels + ')');\r\n\r\n\treturn this.data[channel]\r\n};\r\n\r\n\r\n/**\r\n * Place data to the destination buffer, starting from the position\r\n */\r\nAudioBuffer.prototype.copyFromChannel = function (destination, channelNumber, startInChannel) {\r\n\tif (startInChannel == null) startInChannel = 0;\r\n\tvar data = this.data[channelNumber]\r\n\tfor (var i = startInChannel, j = 0; i < this.length && j < destination.length; i++, j++) {\r\n\t\tdestination[j] = data[i];\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Place data from the source to the channel, starting (in self) from the position\r\n * Clone of WAAudioBuffer\r\n */\r\nAudioBuffer.prototype.copyToChannel = function (source, channelNumber, startInChannel) {\r\n\tvar data = this.data[channelNumber]\r\n\r\n\tif (!startInChannel) startInChannel = 0;\r\n\r\n\tfor (var i = startInChannel, j = 0; i < this.length && j < source.length; i++, j++) {\r\n\t\tdata[i] = source[j];\r\n\t}\r\n};\r\n\r\n",
    "'use strict'\r\n\r\nvar cache = {}\r\n\r\nmodule.exports = function getContext (options) {\r\n\tif (typeof window === 'undefined') return null\r\n\t\r\n\tvar OfflineContext = window.OfflineAudioContext || window.webkitOfflineAudioContext\r\n\tvar Context = window.AudioContext || window.webkitAudioContext\r\n\t\r\n\tif (!Context) return null\r\n\r\n\tif (typeof options === 'number') {\r\n\t\toptions = {sampleRate: options}\r\n\t}\r\n\r\n\tvar sampleRate = options && options.sampleRate\r\n\r\n\r\n\tif (options && options.offline) {\r\n\t\tif (!OfflineContext) return null\r\n\r\n\t\treturn new OfflineContext(options.channels || 2, options.length, sampleRate || 44100)\r\n\t}\r\n\r\n\r\n\t//cache by sampleRate, rather strong guess\r\n\tvar ctx = cache[sampleRate]\r\n\r\n\tif (ctx) return ctx\r\n\r\n\t//several versions of firefox have issues with the\r\n\t//constructor argument\r\n\t//see: https://bugzilla.mozilla.org/show_bug.cgi?id=1361475\r\n\ttry {\r\n\t\tctx = new Context(options)\r\n\t}\r\n\tcatch (err) {\r\n\t\tctx = new Context()\r\n\t}\r\n\tcache[ctx.sampleRate] = cache[sampleRate] = ctx\r\n\r\n\treturn ctx\r\n}\r\n",
    "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return (b64.length * 3 / 4) - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr((len * 3 / 4) - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0; i < l; i += 4) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n",
    "(function(root) {\n  var isArrayBufferSupported = (new Buffer(0)).buffer instanceof ArrayBuffer;\n\n  var bufferToArrayBuffer = isArrayBufferSupported ? bufferToArrayBufferSlice : bufferToArrayBufferCycle;\n\n  function bufferToArrayBufferSlice(buffer) {\n    return buffer.buffer.slice(buffer.byteOffset, buffer.byteOffset + buffer.byteLength);\n  }\n\n  function bufferToArrayBufferCycle(buffer) {\n    var ab = new ArrayBuffer(buffer.length);\n    var view = new Uint8Array(ab);\n    for (var i = 0; i < buffer.length; ++i) {\n      view[i] = buffer[i];\n    }\n    return ab;\n  }\n\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = bufferToArrayBuffer;\n    }\n    exports.bufferToArrayBuffer = bufferToArrayBuffer;\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return bufferToArrayBuffer;\n    });\n  } else {\n    root.bufferToArrayBuffer = bufferToArrayBuffer;\n  }\n})(this);\n",
    "/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('Invalid typed array length')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\nif (typeof Symbol !== 'undefined' && Symbol.species &&\n    Buffer[Symbol.species] === Buffer) {\n  Object.defineProperty(Buffer, Symbol.species, {\n    value: null,\n    configurable: true,\n    enumerable: false,\n    writable: false\n  })\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (isArrayBuffer(value)) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  return fromObject(value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nBuffer.prototype.__proto__ = Uint8Array.prototype\nBuffer.__proto__ = Uint8Array\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj) {\n    if (isArrayBufferView(obj) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n        return createBuffer(0)\n      }\n      return fromArrayLike(obj)\n    }\n\n    if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n      return fromArrayLike(obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (isArrayBufferView(string) || isArrayBuffer(string)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  newBuf.__proto__ = Buffer.prototype\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : new Buffer(val, encoding)\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffers from another context (i.e. an iframe) do not pass the `instanceof` check\n// but they should be treated as valid. See: https://github.com/feross/buffer/issues/166\nfunction isArrayBuffer (obj) {\n  return obj instanceof ArrayBuffer ||\n    (obj != null && obj.constructor != null && obj.constructor.name === 'ArrayBuffer' &&\n      typeof obj.byteLength === 'number')\n}\n\n// Node 0.10 supports `ArrayBuffer` but lacks `ArrayBuffer.isView`\nfunction isArrayBufferView (obj) {\n  return (typeof ArrayBuffer.isView === 'function') && ArrayBuffer.isView(obj)\n}\n\nfunction numberIsNaN (obj) {\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n",
    "exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n",
    "/**\r\n * @module  is-audio-buffer\r\n */\r\n'use strict';\r\n\r\nmodule.exports = function isAudioBuffer (buffer) {\r\n\t//the guess is duck-typing\r\n\treturn buffer != null\r\n\t&& typeof buffer.length === 'number'\r\n\t&& typeof buffer.sampleRate === 'number' //swims like AudioBuffer\r\n\t&& typeof buffer.getChannelData === 'function' //quacks like AudioBuffer\r\n\t// && buffer.copyToChannel\r\n\t// && buffer.copyFromChannel\r\n\t&& typeof buffer.duration === 'number'\r\n};\r\n",
    "module.exports = true;",
    "/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n",
    "'use strict';\nvar toString = Object.prototype.toString;\n\nmodule.exports = function (x) {\n\tvar prototype;\n\treturn toString.call(x) === '[object Object]' && (prototype = Object.getPrototypeOf(x), prototype === null || prototype === Object.getPrototypeOf({}));\n};\n",
    "var WORKER_PATH = './recorderWorker.js';\n\nvar Recorder = function(source, cfg){\n  var config = cfg || {};\n  var bufferLen = config.bufferLen || 4096;\n  this.context = source.context;\n  this.node = (this.context.createScriptProcessor ||\n               this.context.createJavaScriptNode).call(this.context,\n                                                       bufferLen, 2, 2);\n  var worker = new Worker((window.URL || window.webkitURL).createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module \\'\"+o+\"\\'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\\nvar recLength = 0,\\n  recBuffersL = [],\\n  recBuffersR = [],\\n  sampleRate;\\n\\n\\nself.onmessage = function(e) {\\n  switch(e.data.command){\\n    case \\'init\\':\\n      init(e.data.config);\\n      break;\\n    case \\'record\\':\\n      record(e.data.buffer);\\n      break;\\n    case \\'exportWAV\\':\\n      exportWAV(e.data.type);\\n      break;\\n    case \\'getBuffer\\':\\n      getBuffer();\\n      break;\\n    case \\'clear\\':\\n      clear();\\n      break;\\n  }\\n};\\n\\nfunction init(config){\\n  sampleRate = config.sampleRate;\\n}\\n\\nfunction record(inputBuffer){\\n  recBuffersL.push(inputBuffer[0]);\\n  recBuffersR.push(inputBuffer[1]);\\n  recLength += inputBuffer[0].length;\\n}\\n\\nfunction exportWAV(type){\\n  var bufferL = mergeBuffers(recBuffersL, recLength);\\n  var bufferR = mergeBuffers(recBuffersR, recLength);\\n  var interleaved = interleave(bufferL, bufferR);\\n  var dataview = encodeWAV(interleaved);\\n  var audioBlob = new Blob([dataview], { type: type });\\n\\n  self.postMessage(audioBlob);\\n}\\n\\nfunction getBuffer() {\\n  var buffers = [];\\n  buffers.push( mergeBuffers(recBuffersL, recLength) );\\n  buffers.push( mergeBuffers(recBuffersR, recLength) );\\n  self.postMessage(buffers);\\n}\\n\\nfunction clear(){\\n  recLength = 0;\\n  recBuffersL = [];\\n  recBuffersR = [];\\n}\\n\\nfunction mergeBuffers(recBuffers, recLength){\\n  var result = new Float32Array(recLength);\\n  var offset = 0;\\n  for (var i = 0; i < recBuffers.length; i++){\\n    result.set(recBuffers[i], offset);\\n    offset += recBuffers[i].length;\\n  }\\n  return result;\\n}\\n\\nfunction interleave(inputL, inputR){\\n  var length = inputL.length + inputR.length;\\n  var result = new Float32Array(length);\\n\\n  var index = 0,\\n    inputIndex = 0;\\n\\n  while (index < length){\\n    result[index++] = inputL[inputIndex];\\n    result[index++] = inputR[inputIndex];\\n    inputIndex++;\\n  }\\n  return result;\\n}\\n\\nfunction floatTo16BitPCM(output, offset, input){\\n  for (var i = 0; i < input.length; i++, offset+=2){\\n    var s = Math.max(-1, Math.min(1, input[i]));\\n    output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\\n  }\\n}\\n\\nfunction writeString(view, offset, string){\\n  for (var i = 0; i < string.length; i++){\\n    view.setUint8(offset + i, string.charCodeAt(i));\\n  }\\n}\\n\\nfunction encodeWAV(samples){\\n  var buffer = new ArrayBuffer(44 + samples.length * 2);\\n  var view = new DataView(buffer);\\n\\n  /* RIFF identifier */\\n  writeString(view, 0, \\'RIFF\\');\\n  /* RIFF chunk length */\\n  view.setUint32(4, 36 + samples.length * 2, true);\\n  /* RIFF type */\\n  writeString(view, 8, \\'WAVE\\');\\n  /* format chunk identifier */\\n  writeString(view, 12, \\'fmt \\');\\n  /* format chunk length */\\n  view.setUint32(16, 16, true);\\n  /* sample format (raw) */\\n  view.setUint16(20, 1, true);\\n  /* channel count */\\n  view.setUint16(22, 2, true);\\n  /* sample rate */\\n  view.setUint32(24, sampleRate, true);\\n  /* byte rate (sample rate * block align) */\\n  view.setUint32(28, sampleRate * 4, true);\\n  /* block align (channel count * bytes per sample) */\\n  view.setUint16(32, 4, true);\\n  /* bits per sample */\\n  view.setUint16(34, 16, true);\\n  /* data chunk identifier */\\n  writeString(view, 36, \\'data\\');\\n  /* data chunk length */\\n  view.setUint32(40, samples.length * 2, true);\\n\\n  floatTo16BitPCM(view, 44, samples);\\n\\n  return view;\\n}\\n\\n},{}]},{},[1]);\\n'],{type:\"text/javascript\"})));\n  worker.onmessage = function(e){\n    var blob = e.data;\n    currCallback(blob);\n  }\n\n  worker.postMessage({\n    command: 'init',\n    config: {\n      sampleRate: this.context.sampleRate\n    }\n  });\n  var recording = false,\n    currCallback;\n\n  this.node.onaudioprocess = function(e){\n    if (!recording) return;\n    worker.postMessage({\n      command: 'record',\n      buffer: [\n        e.inputBuffer.getChannelData(0),\n        e.inputBuffer.getChannelData(1)\n      ]\n    });\n  }\n\n  this.configure = function(cfg){\n    for (var prop in cfg){\n      if (cfg.hasOwnProperty(prop)){\n        config[prop] = cfg[prop];\n      }\n    }\n  }\n\n  this.record = function(){\n    recording = true;\n  }\n\n  this.stop = function(){\n    recording = false;\n  }\n\n  this.clear = function(){\n    worker.postMessage({ command: 'clear' });\n  }\n\n  this.getBuffer = function(cb) {\n    currCallback = cb || config.callback;\n    worker.postMessage({ command: 'getBuffer' })\n  }\n\n  this.exportWAV = function(cb, type){\n    currCallback = cb || config.callback;\n    type = type || config.type || 'audio/wav';\n    if (!currCallback) throw new Error('Callback not set');\n    worker.postMessage({\n      command: 'exportWAV',\n      type: type\n    });\n  }\n\n  source.connect(this.node);\n  this.node.connect(this.context.destination);    //this should not be necessary\n};\n\nRecorder.forceDownload = function(blob, filename){\n  var url = (window.URL || window.webkitURL).createObjectURL(blob);\n  var link = window.document.createElement('a');\n  link.href = url;\n  link.download = filename || 'output.wav';\n  var click = document.createEvent(\"Event\");\n  click.initEvent(\"click\", true, true);\n  link.dispatchEvent(click);\n}\n\nmodule.exports = Recorder;\n",
    "/**\r\n * @file AMR 录音、转换、播放器\r\n * @author BenzLeung(https://github.com/BenzLeung)\r\n * @date 2017/11/12\r\n * Created by JetBrains PhpStorm.\r\n *\r\n * 每位工程师都有保持代码优雅的义务\r\n * each engineer has a duty to keep the code elegant\r\n */\r\n\r\nimport {\r\n    decodeAudioArrayBufferByContext,\r\n    generateRecordSamples,\r\n    getCtxSampleRate,\r\n    initRecorder,\r\n    isRecording,\r\n    playPcm,\r\n    startRecord,\r\n    stopPcm,\r\n    stopRecord\r\n} from \"./audioContext\";\r\n\r\nconst WORKER_PATH = './amrWorker.min.js';\r\n\r\nexport default class BenzAMRRecorder {\r\n\r\n    _isInit = false;\r\n\r\n    _isInitRecorder = false;\r\n\r\n    _samples = new Float32Array(0);\r\n\r\n    _rawData = new Uint8Array(0);\r\n\r\n    _blob = null;\r\n\r\n    _onEnded = null;\r\n\r\n    _onPlay = null;\r\n\r\n    _onStop = null;\r\n\r\n    _onStartRecord = null;\r\n\r\n    _onCancelRecord = null;\r\n\r\n    _onFinishRecord = null;\r\n\r\n    _isPlaying = false;\r\n    \r\n    _amrWorker;\r\n    \r\n    _amrResolves = {};\r\n    \r\n    _amrSeq = 1;\r\n    \r\n    constructor() {\r\n\r\n    }\r\n\r\n    /**\r\n     * 是否已经初始化\r\n     * @return {boolean}\r\n     */\r\n    isInit() {\r\n        return this._isInit;\r\n    }\r\n\r\n    /**\r\n     * 使用浮点数据初始化\r\n     * @param {Float32Array} array\r\n     * @return {Promise}\r\n     */\r\n    initWithArrayBuffer(array) {\r\n        if (this._isInit || this._isInitRecorder) {\r\n            throw new Error('AMR has been initialized. For a new AMR, please generate a new BenzAMRRecorder().');\r\n        }\r\n        this._playEmpty();\r\n        return new Promise((resolve, reject) => {\r\n            let u8Array = new Uint8Array(array);\r\n            this.decodeAMRAsync(u8Array).then((samples) => {\r\n                this._samples = samples;\r\n                this._isInit = true;\r\n\r\n                if (!this._samples) {\r\n                    decodeAudioArrayBufferByContext(array).then((data) => {\r\n                        this._isInit = true;\r\n                        return this.encodeAMRAsync(data, getCtxSampleRate());\r\n                    }).then((rawData) => {\r\n                        this._rawData = rawData;\r\n                        this._blob = BenzAMRRecorder.rawAMRData2Blob(rawData);\r\n                        return this.decodeAMRAsync(rawData);\r\n                    }).then((sample) => {\r\n                        this._samples = sample;\r\n                        resolve();\r\n                    }).catch(() => {\r\n                        reject(new Error('Failed to decode.'));\r\n                    });\r\n                } else {\r\n                    this._rawData = u8Array;\r\n                    resolve();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 使用 Blob 对象初始化（ <input type=\"file\">）\r\n     * @param {Blob} blob\r\n     * @return {Promise}\r\n     */\r\n    initWithBlob(blob) {\r\n        if (this._isInit || this._isInitRecorder) {\r\n            throw new Error('AMR has been initialized. For a new AMR, please generate a new BenzAMRRecorder().');\r\n        }\r\n        this._playEmpty();\r\n        this._blob = blob;\r\n        const p = new Promise((resolve) => {\r\n            let reader = new FileReader();\r\n            reader.onload = function(e) {\r\n                resolve(e.target.result);\r\n            };\r\n            reader.readAsArrayBuffer(blob);\r\n        });\r\n        return p.then((data) => {\r\n            return this.initWithArrayBuffer(data);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 使用 url 初始化\r\n     * @param {string} url\r\n     * @return {Promise}\r\n     */\r\n    initWithUrl(url) {\r\n        if (this._isInit || this._isInitRecorder) {\r\n            throw new Error('AMR has been initialized. For a new AMR, please generate a new BenzAMRRecorder().');\r\n        }\r\n        this._playEmpty();\r\n        const p = new Promise((resolve, reject) => {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open('GET', url, true);\r\n            xhr.responseType = 'arraybuffer';\r\n            xhr.onload = function() {\r\n                resolve(this.response);\r\n            };\r\n            xhr.onerror = function() {\r\n                reject(new Error('Failed to fetch ' + url));\r\n            };\r\n            xhr.send();\r\n        });\r\n        return p.then((array) => {\r\n            return this.initWithArrayBuffer(array);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 初始化录音\r\n     * @return {Promise}\r\n     */\r\n    initWithRecord() {\r\n        if (this._isInit || this._isInitRecorder) {\r\n            throw new Error('AMR has been initialized. For a new AMR, please generate a new BenzAMRRecorder().');\r\n        }\r\n        this._playEmpty();\r\n        return new Promise((resolve, reject) => {\r\n            initRecorder().then(() => {\r\n                this._isInitRecorder = true;\r\n                resolve();\r\n            }).catch((e) => {\r\n                reject(e);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * init 之前先播放一个空音频。\r\n     * 因为有些环境（如iOS）播放首个音频时禁止自动、异步播放，\r\n     * 播放空音频防止加载后立即播放的功能失效。\r\n     * 但即使如此，init* 仍然须放入一个用户事件中\r\n     * @private\r\n     */\r\n    _playEmpty = () => {\r\n        playPcm(new Float32Array(10), 24000);\r\n    };\r\n\r\n    on(action, fn) {\r\n        if (typeof fn === 'function') {\r\n            switch (action) {\r\n                case 'play':\r\n                    this._onPlay = fn;\r\n                    break;\r\n                case 'stop':\r\n                    this._onStop = fn;\r\n                    break;\r\n                case 'ended':\r\n                    this._onEnded = fn;\r\n                    break;\r\n                case 'startRecord':\r\n                    this._onStartRecord = fn;\r\n                    break;\r\n                case 'cancelRecord':\r\n                    this._onCancelRecord = fn;\r\n                    break;\r\n                case 'finishRecord':\r\n                    this._onFinishRecord = fn;\r\n                    break;\r\n                default:\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 播放事件\r\n     * @param {Function} fn\r\n     */\r\n    onPlay(fn) {\r\n        this.on('play', fn);\r\n    }\r\n\r\n    /**\r\n     * 停止事件（包括播放结束）\r\n     * @param {Function} fn\r\n     */\r\n    onStop(fn) {\r\n        this.on('stop', fn);\r\n    }\r\n\r\n    /**\r\n     * 播放结束事件\r\n     * @param {Function} fn\r\n     */\r\n    onEnded(fn) {\r\n        this.on('ended', fn);\r\n    }\r\n\r\n    /**\r\n     * 开始录音事件\r\n     * @param {Function} fn\r\n     */\r\n    onStartRecord(fn) {\r\n        this.on('startRecord', fn);\r\n    }\r\n\r\n    /**\r\n     * 结束录音事件\r\n     * @param {Function} fn\r\n     */\r\n    onFinishRecord(fn) {\r\n        this.on('finishRecord', fn);\r\n    }\r\n\r\n    /**\r\n     * 放弃录音事件\r\n     * @param {Function} fn\r\n     */\r\n    onCancelRecord(fn) {\r\n        this.on('cancelRecord', fn);\r\n    }\r\n\r\n    _onEndCallback = () => {\r\n        this._isPlaying = false;\r\n        if (this._onStop) {\r\n            this._onStop();\r\n        }\r\n        if (this._onEnded) {\r\n            this._onEnded();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 播放\r\n     */\r\n    play() {\r\n        if (!this._isInit) {\r\n            throw new Error('Please init AMR first.');\r\n        }\r\n        if (this._onPlay) {\r\n            this._onPlay();\r\n        }\r\n        this._isPlaying = true;\r\n        playPcm(this._samples, this._isInitRecorder ? getCtxSampleRate() : 8000, this._onEndCallback.bind(this));\r\n    }\r\n\r\n    /**\r\n     * 停止\r\n     */\r\n    stop() {\r\n        stopPcm();\r\n        this._isPlaying = false;\r\n        if (this._onStop) {\r\n            this._onStop();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 是否正在播放\r\n     * @return {boolean}\r\n     */\r\n    isPlaying() {\r\n        return this._isPlaying;\r\n    }\r\n\r\n    /**\r\n     * 开始录音\r\n     */\r\n    startRecord() {\r\n        startRecord();\r\n        if (this._onStartRecord) {\r\n            this._onStartRecord();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 结束录音，并把录制的音频转换成 AMR\r\n     * @return {Promise}\r\n     */\r\n    finishRecord() {\r\n        return new Promise((resolve) => {\r\n            stopRecord();\r\n            generateRecordSamples().then((samples) => {\r\n                this._samples = samples;\r\n                return this.encodeAMRAsync(samples, getCtxSampleRate());\r\n            }).then((rawData) => {\r\n                this._rawData = rawData;\r\n                this._blob = BenzAMRRecorder.rawAMRData2Blob(this._rawData);\r\n                this._isInit = true;\r\n                if (this._onFinishRecord) {\r\n                    this._onFinishRecord();\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 放弃录音\r\n     */\r\n    cancelRecord() {\r\n        stopRecord();\r\n        if (this._onCancelRecord) {\r\n            this._onCancelRecord();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 是否正在录音\r\n     * @return {boolean}\r\n     */\r\n    isRecording() {\r\n        return isRecording();\r\n    }\r\n\r\n    /**\r\n     * 获取音频的时间长度（单位：秒）\r\n     * @return {Number}\r\n     */\r\n    getDuration() {\r\n        let rate = this._isInitRecorder ? getCtxSampleRate() : 8000;\r\n        return this._samples.length / rate;\r\n    }\r\n\r\n    getBlob() {\r\n        return this._blob;\r\n    }\r\n\r\n    /*\r\n    static encodeAMR(samples, sampleRate) {\r\n        sampleRate = sampleRate || 8000;\r\n        return AMR.encode(samples, sampleRate, 7);\r\n    }\r\n    */\r\n\r\n    _runAMRWorker = (msg, resolve) => {\r\n        const amrWorker = new Worker(WORKER_PATH);\r\n        amrWorker.postMessage(msg);\r\n        amrWorker.onmessage = (e) => {\r\n            resolve(e.data.amr);\r\n            amrWorker.terminate();\r\n        };\r\n    };\r\n\r\n    encodeAMRAsync(samples, sampleRate) {\r\n        return new Promise(resolve => {\r\n            this._runAMRWorker({\r\n                command: 'encode',\r\n                samples: samples,\r\n                sampleRate: sampleRate\r\n            }, resolve);\r\n        });\r\n    }\r\n    \r\n    decodeAMRAsync(u8Array) {\r\n        return new Promise(resolve => {\r\n            this._runAMRWorker({\r\n                command: 'decode',\r\n                buffer: u8Array\r\n            }, resolve);\r\n        })\r\n    }\r\n\r\n    static rawAMRData2Blob(data) {\r\n        return new Blob([data.buffer], {type: 'audio/amr'});\r\n    }\r\n}\r\n",
    "/**\r\n * @file 公共的 Web Audio API Context\r\n * @author BenzLeung(https://github.com/BenzLeung)\r\n * @date 2017/11/12\r\n * Created by JetBrains PhpStorm.\r\n *\r\n * 每位工程师都有保持代码优雅的义务\r\n * each engineer has a duty to keep the code elegant\r\n */\r\n\r\nimport Recorder from 'recorderjs';\r\nimport remix from 'audio-buffer-remix';\r\n\r\nconst AudioContext = window.AudioContext || window.webkitAudioContext || window.mozAudioContext;\r\n\r\nlet ctx = null;\r\nlet curSourceNode = null;\r\n\r\nif (AudioContext) {\r\n    ctx = new AudioContext();\r\n} else {\r\n    console.error(new Error('Web Audio API is Unsupported.'));\r\n}\r\n/*\r\nconst increaseSampleRate = function (samples, multiple) {\r\n    let sampleLen = samples.length;\r\n    let newSamples = new Float32Array(sampleLen * multiple);\r\n    for (let i = 0; i < sampleLen; i ++) {\r\n        for (let j = 0; j < multiple; j ++) {\r\n            newSamples[i * multiple + j] = samples[i];\r\n        }\r\n    }\r\n    return newSamples;\r\n};\r\n*/\r\n\r\nexport const playPcm = function (samples, sampleRate, onEnded) {\r\n    sampleRate = sampleRate || 8000;\r\n    stopPcm();\r\n    curSourceNode = ctx['createBufferSource']();\r\n    let _samples = samples;\r\n    let buffer, channelBuffer;\r\n    try {\r\n        buffer = ctx['createBuffer'](1, samples.length, sampleRate);\r\n    } catch (e) {\r\n        // iOS 不支持 22050 以下的采样率，于是先提升采样率，然后用慢速播放\r\n        if (sampleRate < 11025) {\r\n            /*buffer = ctx['createBuffer'](1, samples.length * 3, sampleRate * 3);\r\n            _samples = increaseSampleRate(samples, 3);*/\r\n            buffer = ctx['createBuffer'](1, samples.length, sampleRate * 4);\r\n            curSourceNode['playbackRate'].value = 0.25;\r\n        } else {\r\n            /*buffer = ctx['createBuffer'](1, samples.length * 2, sampleRate * 2);\r\n            _samples = increaseSampleRate(samples, 2);*/\r\n            buffer = ctx['createBuffer'](1, samples.length, sampleRate * 2);\r\n            curSourceNode['playbackRate'].value = 0.5;\r\n        }\r\n    }\r\n    if (buffer['copyToChannel']) {\r\n        buffer['copyToChannel'](_samples, 0, 0)\r\n    } else {\r\n        channelBuffer = buffer['getChannelData'](0);\r\n        channelBuffer.set(_samples);\r\n    }\r\n    curSourceNode['buffer'] = buffer;\r\n    curSourceNode['loop'] = false;\r\n    curSourceNode['connect'](ctx['destination']);\r\n    curSourceNode.onended = onEnded;\r\n    curSourceNode.start();\r\n};\r\n\r\nexport const stopPcm = function () {\r\n    if (curSourceNode) {\r\n        curSourceNode.stop();\r\n        curSourceNode = null;\r\n    }\r\n};\r\n\r\nlet recorderStream = null;\r\nlet recorder = null;\r\nlet recording = false;\r\n\r\nexport const initRecorder = function () {\r\n    return new Promise((resolve, reject) => {\r\n        let s = (stream) => {\r\n            recorderStream = ctx['createMediaStreamSource'](stream);\r\n            recorder = new Recorder(recorderStream);\r\n            recording = false;\r\n            resolve();\r\n        };\r\n        let j = (e) => {\r\n            reject(e);\r\n        };\r\n        if (!recorder) {\r\n            if (window.navigator.mediaDevices.getUserMedia) {\r\n                window.navigator.mediaDevices.getUserMedia({audio: true}).then(s).catch(j);\r\n            } else if (window.navigator.getUserMedia) {\r\n                window.navigator.getUserMedia({audio: true}, s, j);\r\n            } else {\r\n                j();\r\n            }\r\n        } else {\r\n            resolve();\r\n        }\r\n    });\r\n};\r\n\r\nexport const isRecording = function () {\r\n    return recorder && recording;\r\n};\r\n\r\nexport const startRecord = function () {\r\n    if (recorder) {\r\n        recorder.clear();\r\n        recorder.record();\r\n        recording = true;\r\n    }\r\n};\r\n\r\nexport const stopRecord = function () {\r\n    if (recorder) {\r\n        recorder.stop();\r\n        recording = false;\r\n    }\r\n};\r\n\r\nexport const getCtxSampleRate = function () {\r\n    return ctx.sampleRate;\r\n};\r\n\r\nexport const generateRecordSamples = function () {\r\n    return new Promise((resolve) => {\r\n        if (recorder) {\r\n            recorder.getBuffer((buffers) => {\r\n                resolve(buffers[0]);\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nexport const decodeAudioArrayBufferByContext = function (array) {\r\n    return new Promise((resolve, reject) => {\r\n        ctx['decodeAudioData'](array, (audioBuf) => {\r\n            // 把多声道音频 mix 成单声道\r\n            const oneChannel = remix(audioBuf, 1);\r\n            resolve(oneChannel['getChannelData'](0));\r\n        }, reject);\r\n    });\r\n};\r\n",
    "/**\r\n * @file Browserify 入口\r\n * @author BenzLeung(https://github.com/BenzLeung)\r\n * @date 2017/12/10\r\n * Created by JetBrains PhpStorm.\r\n *\r\n * 每位工程师都有保持代码优雅的义务\r\n * each engineer has a duty to keep the code elegant\r\n */\r\n\r\nmodule.exports = require('./BenzAMRRecorder.js').default;"
  ]
}